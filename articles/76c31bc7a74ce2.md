---
title: "nuxt4ãŒæ­£å¼ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã®ã§nuxt3ã‹ã‚‰ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ãŸ"
emoji: "ğŸš€"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["typescript", "nuxtjs", "migration", "vue"]
published: true
---

ã“ã“æ•°å¹´ã¯ React ã‚„ Next.js ã‚’æ¥­å‹™ã§ä½¿ã†ã“ã¨ãŒå¤šã‹ã£ãŸã®ã§ã™ãŒã€å€‹äººã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã¯ Nuxt.js ã‚’ä½¿ã£ã¦ã„ã¾ã—ãŸã€‚
ä»Šå› Nuxt4 ãŒæ­£å¼ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã®ã§ã€Nuxt3 ã‹ã‚‰ Nuxt4 ã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¦ã¿ã¾ã—ãŸã€‚
å€‹äººçš„ã« Nuxt ã‚„ Vue ã¯å¤§å¥½ãã§ã™ã€‚

## Nuxt4ã¸ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®æµã‚Œ

ç§ã®å ´åˆã€ã–ã£ãã‚Šä»¥ä¸‹ã®æµã‚Œã§ç°¡å˜ã«å®Œäº†ã§ãã¾ã—ãŸã€‚ã¾ãŸã€å†…å®¹ã¯ã€Nuxt4 ã®ãƒªãƒªãƒ¼ã‚¹ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã‚„å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰ã«è©³ç´°ãŒã¾ã¨ã¾ã£ã¦ã„ã‚‹ã®ã§ãã¡ã‚‰ã‚‚åˆã‚ã›ã¦ç¢ºèªã™ã‚‹ã¨è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚

https://nuxt.com/blog/v4

https://nuxt.com/docs/4.x/getting-started/upgrade#migrating-to-nuxt-4

1. Nuxt ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰
å…¬å¼ã§ã¯ã€`pnpm nuxt upgrade`ã¨ã„ã£ãŸã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‚ã‚Šã¾ã™ãŒã€æ‰‹å‹•ã§ package.json ã‚’æ›´æ–°ã—ã¦ã€`pnpm install`ã‚’å®Ÿè¡Œã—ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚
ã¡ãªã¿ã«å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã§é¸æŠè‚¢ãŒå‡ºã¦ãã¾ã™ã€‚`dedupe lockfile`ã¨ã¯ã€lockfile ã‹ã‚‰é‡è¤‡ã—ãŸä¾å­˜é–¢ä¿‚ã‚’å–ã‚Šé™¤ãæ“ä½œã®ã“ã¨ã§æ¨å¥¨ã¨ã®ã“ã¨ã€‚

```shell
XXXXXXX % pnpm nuxt upgrade
â„¹ Package manager: pnpm 10.13.1  nuxi 4:47:07 PM
â„¹ Current Nuxt version: 4.0.0  nuxi 4:47:07 PM

â¯ Would you like to dedupe your lockfile (recommended) or recreate node_modules and pnpm-lock.yaml? This can fix problems with hoisted dependency versions and ensure you have
the most up-to-date dependencies.
â— dedupe lockfile (recommended)
â—‹ recreate node_modules and pnpm-lock.yaml
â—‹ skip
```

2. Nuxt4 ã®æ–°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã«åˆã‚ã›ã‚‹

æ‰‹å‹•ã§æ›´æ–°ã—ã¦ã‚‚ã„ã„ã®ã§ã™ãŒã€å…¬å¼ã§ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ã‚·ãƒ”ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ãã¡ã‚‰ã‚’ä½¿ã†ã¨ç°¡å˜ã§ã™ã€‚

```shell
npx codemod@latest nuxt/4/migration-recipe
```

å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªé¸æŠè‚¢ãŒå‡ºã¦ãã‚‹ã®ã§ã€`nuxt/4/file-structure`ã‚’é¸æŠã—ã¾ã™ã€‚
Nuxt4 ã§ã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆãŒ app/é…ä¸‹ã«å¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯æ¨™æº–ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã«è‡ªå‹•çš„ã«å¤‰æ›´ã—ã¦ãã‚Œã¾ã™ã€‚

```shell
XXXXXXX % npx codemod@latest nuxt/4/migration-recipe
âœ” Successfully fetched "nuxt/4/migration-recipe" from local cache.
? Press Enter to run the selected codemods in order. You can deselect anything you donâ€™t want. (Press <space> to select, <a> to toggle all, <i> to invert selection, and <enter> 
to proceed)
 â—‰ nuxt/4/absolute-watch-path
 â—‰ nuxt/4/default-data-error-value
 â—‰ nuxt/4/deprecated-dedupe-value
â¯â—‰ nuxt/4/file-structure
 â—‰ nuxt/4/shallow-function-reactivity
 â—‰ nuxt/4/template-compilation-changes
```

```shell
XXXXXXX % npx codemod@latest nuxt/4/migration-recipe
âœ” Successfully fetched "nuxt/4/migration-recipe" from local cache.
? Press Enter to run the selected codemods in order. You can deselect anything you donâ€™t want. nuxt/4/absolute-watch-path, nuxt/4/default-data-error-value, 
nuxt/4/deprecated-dedupe-value, nuxt/4/file-structure, nuxt/4/shallow-function-reactivity, nuxt/4/template-compilation-changes
âœ” Successfully fetched recipe codemods.
? Current git state contains uncommitted changes. Proceed anyway? Yes
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                       â”‚
â”‚                                                                                                       â”‚
â”‚      Codemod: nuxt/4/absolute-watch-path@1.0.3                                                        â”‚
â”‚      Target: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX                                                      â”‚
â”‚                                                                                                       â”‚
â”‚      Using paths provided by codemod settings                                                         â”‚
ã€œã€œçœç•¥ã€œã€œ
â”‚      **/.dynamodb/**/*.*, **/.tern-port                                                               â”‚
â”‚                                                                                                       â”‚
â”‚      Running in 4 threads                                                                             â”‚
â”‚      File formatting disabled                                                                         â”‚
â”‚                                                                                                       â”‚
â”‚                                                                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
Execution progress | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ | 100% || 64/64 files || Current: 

ã€œã€œçœç•¥ã€œã€œ

No changes were made during the codemod run.
```

ã“ã‚Œã ã‘ã§åŸºæœ¬çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå¤‰æ›´ã¯å®Œäº†ã—ã¾ã™ã€‚ã“ã†ã„ã£ãŸæ°—é…ã‚ŠãŒã‚ã‚‹ã¨ã“ã‚ã« Nuxt.js ã®è‰¯ã•ã‚’æ„Ÿã˜ã¾ã™ã€‚
ãŸã ã—ã€Nuxt æ¨™æº–ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥å¤–ã¯ãã®ã¾ã¾æ®‹ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ãã“ã¯å¿…è¦ã«å¿œã˜ã¦ç§»å‹•ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚
ç§ã®å ´åˆã€`assets`ã€`components`ã€`composables`ã€`layouts`ã€`middleware`ã€`pages`ã€`plugins`ã¯å…ˆã»ã©ã®ã‚³ãƒãƒ³ãƒ‰ã§è‡ªå‹•ç§»å‹•ã•ã‚Œã¾ã—ãŸã€‚
ãŸã ã€æ¨™æº–ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã«ã¯ãªã„`models`ã€`scripts`ãªã©ã®ãƒ•ã‚©ãƒ«ãƒ€ã¯ãã®ã¾ã¾ã§ã—ãŸã®ã§ã€å€‹åˆ¥ã§ç§»å‹•ã•ã›ã¾ã—ãŸã€‚

æœ€çµ‚çš„ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚

```
my-nuxt-app/
â”œâ”€ app/
â”‚  â”œâ”€ assets/
â”‚  â”œâ”€ components/
â”‚  â”œâ”€ composables/
â”‚  â”œâ”€ layouts/
â”‚  â”œâ”€ middleware/
â”‚  â”œâ”€ pages/
â”‚  â”œâ”€ plugins/
â”‚  â”œâ”€ utils/
â”‚  â”œâ”€ app.vue
â”‚  â”œâ”€ app.config.ts
â”‚  â””â”€ error.vue
â”œâ”€ content/
â”œâ”€ public/
â”œâ”€ shared/
â”œâ”€ server/
â””â”€ nuxt.config.ts
```

> å‡ºå…¸ï¼šhttps://nuxt.com/blog/v4#%EF%B8%8F-new-project-structure

## æœ€å¾Œã«

Nuxt4 ã¸ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯å€‹äººã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µã‚¤ãƒˆãªã©ã§ã‚ã‚Œã°ã€ç°¡å˜ã«ã§ããã†ã§ã™ã€‚
React ãŒä¸»æµã«ãªã£ã¦ 10 å¹´ç¨‹åº¦çµŒéã—ãŸã®ã§ã€æ¬¡ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä¸»æµã¯ä½•ã«ãªã‚‹ã®ã‹æ¥½ã—ã¿ã§ã™ã­ã€‚

## è£œè¶³

https://codemod.com/registry

https://github.com/codemod-com/commons/tree/main/codemods/nuxt/4/migration-recipe
